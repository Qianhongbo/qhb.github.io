---
title: 计算机四级知识点
date: 2020-02-03 18:19:45
tags:
---

时钟分为硬件时钟和软件时钟

目态：用户态 -- 一般指令

管态：系统态 -- 特权指令

# 第三章：进程线程模型

1. 顺序执行：顺序性；封闭性；程序结果确定性；程序结果可再现性
2. 多道程序系统：同时处理多个具有独立功能的程序，提高利用率/ 独立性；随机性；资源共享性
3. 程序的并发执行：并发程序相互制约；程序与计算不再一一对应；并发程序结果不可再现

> 多道程序系统属于各种操作系统，是一种思想（实时系统、分布系统）
>
> 并发不等于同时运行

## 进程

1. 进程是正在执行的程序，包括程序，数据，进程控制块
2. 并发性；动态性；独立性；交往性；异步性
3. 三状态模型：就绪状态，运行状态，等待状态
   1. 就绪状态：进程分配到除CPU之外的一切资源；排成就绪队列
   2. 运行状态：就绪状态的程序获得CPU的使用权，单处理器同一时间只能有一个程序处于运行状态
   3. 等待状态/阻塞状态：进程请求输入输出、申请额外空间；不浪费CPU
4. 创建状态，结束状态（完成、未完成）
5. 挂起状态，激活状态（内存、外存转换）
6. 新状态-->就绪状态：就绪队列可以接纳新的进程
7. 就绪状态-->执行状态：按照算法分配；执行状态的进程称为当前进程
8. 执行状态-->就绪状态：时间片结束、优先权较低
9. 执行状态-->阻塞状态：IO请求等
10. 阻塞状态需要先进入就绪状态再进入运行状态

![TIM截图20200202095653](//tvax4.sinaimg.cn/large/006BuM4Jly1gbhtnod40pj30qo0f7k0k.jpg)

## PCB：进程控制块

组织方式

1. 线性方式：需要扫描所有的
2. 索引方式：需要额外的空间
3. 链接方式：相同状态的进程排列在一起

## Unix的`fork()`函数

父进程通过`fork()`创建子进程

特点：只被执行一次，返回**两次**结果，父进程返回的是子进程的`PID`，子进程中`fork`返回0

> 代码中有几个fork()就会输出2^n次

## 线程

线程是进程的一个实体，是被系统独立调度和执行的基本单位

线程基本上不拥有系统资源，但它可以与同属于一个进程的其他线程共享所拥有的全部资源

一个线程可以创建和撤销另一个线程，多个线程之间可以并发执行，因此运行中可以呈现出异步性，因此线程同样有就绪，执行，阻塞三个状态

> 进程是拥有资源的基本单位

> 不同进程之间可以并发执行，一个进程中的多个线程也可以并发执行
>
> QQ和音乐播放可以同时运行（多进程），QQ里可以多个人同时聊天（多线程）
>
> 线程的引入增加了并发性！

> 一个程序至少有一个进程，一个进程至少有一个线程

用户级线程，内核级线程，混合级线程

## 调度

1. 低级调度：内核用一定的调度算法从就绪队列选出一进程
2. 中级调度：调度算法将等待状态的进程调至外存中

## 调度算法

1. 先来先服务调度算法 FCFS：最简单，非抢占式，有利于长进程，不利于短进程。
2. 最短作业优先算法 SPF：优先处理运行时间最短的进程，降低平均等待时间，提高吞吐量，非抢占式，对长进程不利。
3. 最短剩余时间优先调度算法 SRT：抢占式的动态版本。

![TIM截图20200205100110](//tvax3.sinaimg.cn/large/006BuM4Jly1gblan566baj30qc0eedoa.jpg)

4. 时间片轮转调度算法RR：在分时系统中，队首进程执行一个时间片，之后计时器发生一个时钟终端，并将它放到对尾，继续执行。适合于交互进程的调度。
5. 最高优先级调度算法：为了照顾紧迫型的进程
6. 多级反馈队列调度算法MLF：主流使用调度算法

![TIM截图20200208112701](//tvax3.sinaimg.cn/large/006BuM4Jly1gbotzhu7lnj30m80fm452.jpg)

7. 实时系统的调度算法：速率单调调度算法，最早最终时限优先调度

> 进程和程序的本质区别是：进程是动态的，程序是静态的
>
> 进程和程序的其它区别是：进程是在内存，程序是在外存

# 第四章 并发与同步

资源共享程度的三个层次：互斥、死锁、饥饿

临界资源：资源在一段时间内只允许一个进程访问和使用

进程同步机制应该遵循的原则：

1. 空闲让进
2. 忙则等待
3. 有限等待：以免进入“死等”
4. 让权等待：以免进入“忙等”