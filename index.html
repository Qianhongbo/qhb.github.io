<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">








<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">



  <meta name="google-site-verification" content="OgElj4o9DCjKj3vLsPSXYe8He24OJKxYy0ejEmUrsy8">








  <meta name="baidu-site-verification" content="obU5HKXSi3">







  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=EB Garamond:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/Me.JPG?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/ironman.ico?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/Me_16x16.JPG?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">





  <link rel="alternate" href="/atom.xml" title="Blog | Qian Homeberg" type="application/atom+xml">






<meta name="description" content="Daily update">
<meta name="keywords" content="WoW">
<meta property="og:type" content="website">
<meta property="og:title" content="Blog | Qian Homeberg">
<meta property="og:url" content="https://www.qianhongbo.com/index.html">
<meta property="og:site_name" content="Blog | Qian Homeberg">
<meta property="og:description" content="Daily update">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Blog | Qian Homeberg">
<meta name="twitter:description" content="Daily update">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>







  <title>Blog | Qian Homeberg - Look! Who is here! Welcome~~Daily update </title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>
	
	<a href="https://github.com/Qianhongbo" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewbox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
	
    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Blog | Qian Homeberg</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <h1 class="site-subtitle" itemprop="description">Look! Who is here! Welcome~~</h1>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-books">
          <a href="/books/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br>
            
            阅读
          </a>
        </li>
      
        
        <li class="menu-item menu-item-movies">
          <a href="/movies/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-video-camera"></i> <br>
            
            电影
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.qianhongbo.com/OtherArticle/梦里花落知多少.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Qian Hongbo">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/Me.JPG">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Blog | Qian Homeberg">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/OtherArticle/梦里花落知多少.html" itemprop="url">梦里花落知多少</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-06-13T08:54:21+08:00">
                2019-06-13
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/随笔/" itemprop="url" rel="index">
                    <span itemprop="name">随笔</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
				<i class="fa fa-thumb-tack"></i>
				<font color="green">置顶</font>
				<span class="post-meta-divider">|</span>
			

		  
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/OtherArticle/梦里花落知多少.html#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="OtherArticle/梦里花落知多少.html" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  92 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  1 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    

    <div class="post-body" itemprop="articleBody">

      
      
        <div class="post-gallery" itemscope itemtype="http://schema.org/ImageGallery">
          
          
            <div class="post-gallery-row">
              <a class="post-gallery-img fancybox" href="//tva1.sinaimg.cn/large/006BuM4Jly1gc1kfywsvyj30zk0qou0x.jpg" rel="gallery_cl59a3zs9002qz8ptvip7gjm5" itemscope itemtype="http://schema.org/ImageObject" itemprop="url">
                <img src="//tva1.sinaimg.cn/large/006BuM4Jly1gc1kfywsvyj30zk0qou0x.jpg" itemprop="contentUrl">
              </a>
            
          

          
          </div>
        </div>
      

      
        
          
            <p> 很喜欢何炅说的一段话：要得到你必须要付出，要付出你还要学会坚持，如果你真的觉得很难，那你就放弃，但你放弃了就不要抱怨，我觉得人生就是这样，世界真的是公平的，每个人都是通过自己的努力，去决定自己生活的样子！</p>

          
        
      
    </div>
    
    
    
	
	

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.qianhongbo.com/Fullstack/AWS/AWS-CLI.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Qian Hongbo">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/Me.JPG">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Blog | Qian Homeberg">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/Fullstack/AWS/AWS-CLI.html" itemprop="url">AWS CLI</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-07-05T15:36:10+08:00">
                2022-07-05
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Fullstack/" itemprop="url" rel="index">
                    <span itemprop="name">Fullstack</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

		  
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/Fullstack/AWS/AWS-CLI.html#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="Fullstack/AWS/AWS-CLI.html" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  1.2k 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  7 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="AWS-console-or-the-CLI"><a href="#AWS-console-or-the-CLI" class="headerlink" title="AWS console or the CLI"></a>AWS console or the CLI</h2><p>Often we are also faced with the decision of using <strong>the AWS console or the CLI</strong>. While in most cases we can accomplish the same with both options, we should prioritize the console when we are learning new services. On the other hand, we must prioritize the CLI when doing repetitive tasks and when writing scripts.</p>
<h2 id="Create-an-IAM-user"><a href="#Create-an-IAM-user" class="headerlink" title="Create an IAM user"></a>Create an IAM user</h2><ol>
<li>Go to the IAM dashboard</li>
<li>Create a new user</li>
<li>Set user name</li>
<li>Set the permissions to the new user by attaching the AWS Managed <strong>AdministratorAccess</strong> policy from the list of existing policies.</li>
<li>After a user is created successfully, download the access key file (.csv) containing the <em>Access Key ID</em> and a <em>Secret Access Key</em>. You can even copy the keys and stay on the same page. <strong>Don’t skip this step as this will be your only opportunity to download the secret access key file.</strong></li>
</ol>
<p>AWS will generate an IAM access key when you create an IAM user. <strong>IAM key</strong> is the identity access management key that can identify your application (terminal) to the AWS CLI. The IAM key holds the associated permissions to access your account.</p>
<h2 id="Install-AWS-CLI-Mac"><a href="#Install-AWS-CLI-Mac" class="headerlink" title="Install AWS CLI (Mac)"></a>Install AWS CLI (Mac)</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">brew install awscli</span><br><span class="line">aws --version</span><br></pre></td></tr></table></figure>

<h2 id="Configure-the-AWS-CLI"><a href="#Configure-the-AWS-CLI" class="headerlink" title="Configure the AWS CLI"></a>Configure the AWS CLI</h2><p>Run the command below to configure the AWS CLI using the <em>Access Key ID</em> and a <em>Secret Access Key</em> generated in the previous step. If you have closed the web console that showed the access key, you can open the downloaded access key file (.csv) to copy the keys later.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">aws configure</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="left">Prompt</th>
<th align="left">Value</th>
</tr>
</thead>
<tbody><tr>
<td align="left">AWS Access Key ID</td>
<td align="left">[Copy from the classroom]</td>
</tr>
<tr>
<td align="left">AWS Secret Access Key</td>
<td align="left">[Copy from the classroom]</td>
</tr>
<tr>
<td align="left">Default region name</td>
<td align="left">us-east-2 OR us-east-1 (or your choice)</td>
</tr>
<tr>
<td align="left">Default output format</td>
<td align="left">json</td>
</tr>
</tbody></table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># If you are using the Access key of an Admin IAM user, you should reset the `aws_session_token`</span></span><br><span class="line">aws configure <span class="built_in">set</span> aws_session_token <span class="string">""</span> </span><br><span class="line"><span class="comment"># If you are using the Udacity generated Access key, you should set the `aws_session_token`</span></span><br><span class="line">aws configure <span class="built_in">set</span> aws_session_token <span class="string">"XXXXXXXX"</span></span><br></pre></td></tr></table></figure>

<p>where, <code>&quot;XXXXXXXX&quot;</code> is the session token copied from the classroom after clicking on the “OPEN CLOUD GATEWAY” button.</p>
<h2 id="Check"><a href="#Check" class="headerlink" title="Check"></a>Check</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># View the current configuration</span></span><br><span class="line">aws configure list </span><br><span class="line"><span class="comment"># View all existing profile names</span></span><br><span class="line">aws configure list-profiles</span><br><span class="line"><span class="comment"># In case, you want to change the region in a given profile</span></span><br><span class="line"><span class="comment"># aws configure set &lt;parameter&gt; &lt;value&gt;  --profile &lt;profile-name&gt;</span></span><br><span class="line">aws configure <span class="built_in">set</span> region us-east-1</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># If you've just one profile set locally</span></span><br><span class="line">aws iam list-users</span><br><span class="line"><span class="comment"># If you've multiple profiles set locally</span></span><br><span class="line">aws iam list-users --profile &lt;profile-name&gt;</span><br></pre></td></tr></table></figure>

<h2 id="Create-a-Bucket-using-the-CLI"><a href="#Create-a-Bucket-using-the-CLI" class="headerlink" title="Create a Bucket using the CLI"></a>Create a Bucket using the CLI</h2><h3 id="Create-a-public-bucket-in-the-us-east-1-region"><a href="#Create-a-public-bucket-in-the-us-east-1-region" class="headerlink" title="Create a public bucket in the us-east-1 region:"></a>Create a public bucket in the us-east-1 region:</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Bucket names are unique across the Internet, just like DNS. </span></span><br><span class="line"><span class="comment"># Replace the `033212455158` part with some other set of digits. </span></span><br><span class="line">aws s3api  create-bucket --bucket mybucket033212455158 --acl bucket-owner-full-control --region us-east-2 --create-bucket-configuration LocationConstraint=us-east-2</span><br></pre></td></tr></table></figure>

<p>In the command above,</p>
<ul>
<li><code>--bucket</code> option specifies the bucket name of your choice. It must be unique across all AWS accounts.</li>
<li><code>--acl</code> option specifies the accessibility level</li>
<li><code>--region</code> specifies the AWS region where you want to create this bucket.</li>
<li><code>--create-bucket-configuration</code>: If you want to create the bucket in the desired region outside of us-east-1, you will need something like <code>--region us-east-2 --create-bucket-configuration LocationConstraint=us-east-2</code> which will set an appropriate LocationConstraint.</li>
</ul>
<h3 id="Upload-a-sample-file-to-your-bucket"><a href="#Upload-a-sample-file-to-your-bucket" class="headerlink" title="Upload a sample file to your bucket."></a>Upload a sample file to your bucket.</h3><p>The <strong>sample.html</strong> file used in the command below is present at the bottom of this page.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">aws s3api put-object --bucket mybucket033212455158 --key sample.html --body sample.html --content-type text/html</span><br></pre></td></tr></table></figure>

<p>In the command above,</p>
<ul>
<li><code>--key</code> option specifies the name you want to assign to your object in the bucket</li>
<li><code>--body</code> option specifies the file name (complete path) to upload from your local system</li>
<li><code>--content-type</code> specifies the standard MIME type describing the format of the contents.</li>
</ul>
<h3 id="Verification"><a href="#Verification" class="headerlink" title="Verification"></a>Verification</h3><p>Verify the S3 bucket by going to the AWS web console. Alternatively, you can run <code>aws s3 ls</code> in the command line. This will show all of the S3 buckets in your account.</p>
<h3 id="Delete-the-bucket-and-its-content"><a href="#Delete-the-bucket-and-its-content" class="headerlink" title="Delete the bucket and its content"></a>Delete the bucket and its content</h3><p>A bucket can only be deleted if it is empty. Therefore, first delete the <code>Sample.html</code>, and then delete the bucket, as follows:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">aws s3api delete-object --bucket mybucket033212455158 --key sample.html</span><br><span class="line">aws s3api delete-bucket --bucket mybucket033212455158</span><br></pre></td></tr></table></figure>

<p>Navigate back to the S3 dashboard (AWS web console), and verify if the bucket has been deleted successfully.</p>
<h2 id="Using-the-Beanstalk-CLI"><a href="#Using-the-Beanstalk-CLI" class="headerlink" title="Using the Beanstalk CLI"></a>Using the Beanstalk CLI</h2><p>While, AWS CLI can be used to perform almost any possible actions on the AWS platform, the commands to create and manage EB so are long.</p>
<p>Therefore, AWS created a dedicated Elastic Beanstalk (EB) CLI. The EB CLI is simple to use and provides a set of easy commands that let you control your application environment in a convenient way!</p>
<h3 id="Install-EB-CLI"><a href="#Install-EB-CLI" class="headerlink" title="Install EB CLI"></a>Install EB CLI</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install awsebcli</span><br></pre></td></tr></table></figure>

<h3 id="Deploy-a-sample-NodeJS-application"><a href="#Deploy-a-sample-NodeJS-application" class="headerlink" title="Deploy a sample NodeJS application"></a>Deploy a sample NodeJS application</h3><ul>
<li><p>Let’s create a directory. The next few command will deploy a sample NodeJS application to EB.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir testEB</span><br><span class="line"><span class="built_in">cd</span> testEB</span><br></pre></td></tr></table></figure>
</li>
<li><p>Initialize an environment. Run this command in the root directory of the application you want to deploy. The <a href="https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/eb3-init.html" target="_blank" rel="noopener">eb init</a> command will create “.elasticbeanstalk/config.yml” file in the current directory.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Use the node.js 14 or 16 and the default region as applicable to you</span></span><br><span class="line">eb init</span><br></pre></td></tr></table></figure>
</li>
<li><p>The <a href="https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/eb3-create.html" target="_blank" rel="noopener">eb create</a> will bundle you application, if present in the current directory, and deploy to the EB. Otherwise, a sample application will be deployed. We can specify the <code>--sample</code> to be sure.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">eb create --sample --single --instance-types t2.small</span><br></pre></td></tr></table></figure>

<p>Provide you input for the prompts that appear, such as:</p>
<ul>
<li>Enter Environment Name: Default</li>
<li>Enter DNS CNAME prefix: Default</li>
<li>Would you like to enable Spot Fleet requests for this environment? (y/N): N</li>
<li>Do you want to download the sample application into the current directory? (Y/n): Y</li>
</ul>
</li>
</ul>
<p>The command above will take upto 15 mins to create the following resources as part of the environment:</p>
<ol>
<li>An EC2 instance (size: <em>t2.small</em>) to host your application, and without a load balancer because we have use the <em>–single</em> option.</li>
<li>A security group (firewall rules) for the EC2 instance</li>
<li>An S3 bucket to store the application artifacts</li>
<li>A CloudWatch alarm for logging and monitoring</li>
<li>A domain name</li>
</ol>
<h3 id="Some-more-commands"><a href="#Some-more-commands" class="headerlink" title="Some more commands"></a>Some more commands</h3><ul>
<li><p>Check the health of the environment using the following command:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">eb health</span><br></pre></td></tr></table></figure>
</li>
<li><p>For troubleshooting, look into the logs from your terminal:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">eb logs</span><br></pre></td></tr></table></figure>
</li>
<li><p>Editing and redeploying the application. You can edit you local application, and commit your changes. It is important to commit the code changes before you<code>eb deploy</code> it to the beanstalk environment.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git add -A</span><br><span class="line">git commit -m <span class="string">"change log"</span></span><br><span class="line">eb deploy</span><br></pre></td></tr></table></figure>
</li>
<li><p>If you have multiple environments running, you can associate the EB CLI with a particular one using:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">eb list</span><br><span class="line">eb use [env-name]</span><br></pre></td></tr></table></figure>
</li>
<li><p>Clean up</p>
<p>Don’t forget to delete your environment(s) if they are not in use:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">eb list</span><br><span class="line">eb terminate [env-name]</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="S3-using-the-AWS-CLI"><a href="#S3-using-the-AWS-CLI" class="headerlink" title="S3 using the AWS CLI"></a>S3 using the AWS CLI</h2><h3 id="List-the-buckets"><a href="#List-the-buckets" class="headerlink" title="List the buckets"></a>List the buckets</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">aws s3 ls</span><br><span class="line"><span class="comment"># Assuming the bucket name is: myawsbucket-751397240855</span></span><br></pre></td></tr></table></figure>

<h3 id="Synchronize-the-content-of-the-build-folder-into-the-S3-bucket"><a href="#Synchronize-the-content-of-the-build-folder-into-the-S3-bucket" class="headerlink" title="Synchronize the content of the build folder into the S3 bucket"></a>Synchronize the content of the build folder into the S3 bucket</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Change the bucket name as applicable to you</span></span><br><span class="line">aws s3 cp --recursive --acl public-read ./build s3://myawsbucket-751397240855/</span><br></pre></td></tr></table></figure>


          
        
      
    </div>
    
    
    
	
	

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.qianhongbo.com/Fullstack/AWS/AWS-s3.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Qian Hongbo">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/Me.JPG">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Blog | Qian Homeberg">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/Fullstack/AWS/AWS-s3.html" itemprop="url">AWS s3</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-07-05T15:05:43+08:00">
                2022-07-05
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Fullstack/" itemprop="url" rel="index">
                    <span itemprop="name">Fullstack</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

		  
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/Fullstack/AWS/AWS-s3.html#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="Fullstack/AWS/AWS-s3.html" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  472 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  2 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h2><p>While we could use a web server that we set up on Elastic Beanstalk to serve HTML files, there are other options like AWS S3 for this purpose. It is possible that you have already heard about S3 since it is a really popular service. Here are some of its strengths:</p>
<ul>
<li>Inexpensive</li>
<li>Foundational service on AWS upon which many other services are built</li>
<li>Global and available in all regions</li>
</ul>
<p>S3 Stands for Simple Storage Service. It is AWS’s file storage service. S3 is different from a hard drive. It can be referred to as <strong>object-based storage</strong>.</p>
<p>By object-based, we mean that the file name is a key and the value of that key is the actual content of the file. Metadata, which includes information about the object, such as owner, date created, and other important information, is also stored.</p>
<h2 id="Limitations-and-Strengths-of-S3"><a href="#Limitations-and-Strengths-of-S3" class="headerlink" title="Limitations and Strengths of S3"></a>Limitations and Strengths of S3</h2><ul>
<li><strong>S3 can’t run a file system:</strong> S3 is just meant to serve files and cannot act as an operating system.</li>
<li><strong>Fine-grained permission system:</strong> We can control the access to the bucket with Access Control List (ACL) policy, which is a file written in JSON or yml.</li>
<li><strong>Configurable for web hosting:</strong> We can serve static files like HTML and CSS on S3.</li>
</ul>
<h2 id="Create-an-S3-bucket"><a href="#Create-an-S3-bucket" class="headerlink" title="Create an S3 bucket"></a>Create an S3 bucket</h2><p>Here are the summarized steps:</p>
<ol>
<li>Navigate to the <a href="https://s3.console.aws.amazon.com/s3/home?region=us-east-1#" target="_blank" rel="noopener">S3 dashboard</a>, and click on the <strong>Create bucket</strong> button. It will launch a new wizard.</li>
</ol>
<p><img src="https://video.udacity-data.com/topher/2020/November/5fbe37ba_screenshot-2020-11-25-at-4.06.17-pm/screenshot-2020-11-25-at-4.06.17-pm.png" alt="S3 Service - Bucket Dashboard"></p>
<p>We create a bucket first, and later we upload files and folders to it.</p>
<table>
<thead>
<tr>
<th align="left"><strong>Field</strong></th>
<th align="left"><strong>Value</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left">Bucket name</td>
<td align="left">Choose a unique name, such as <em>myawsbucket-75139724085</em></td>
</tr>
<tr>
<td align="left">AWS Region</td>
<td align="left">Default</td>
</tr>
<tr>
<td align="left">Object Ownership</td>
<td align="left">ACLs enabled Bucket owner preferred to determine object access.</td>
</tr>
<tr>
<td align="left">Block all public access</td>
<td align="left">No Create a <strong>public</strong> S3 bucket</td>
</tr>
</tbody></table>
<h2 id="Configure-the-S3-bucket"><a href="#Configure-the-S3-bucket" class="headerlink" title="Configure the S3 bucket"></a>Configure the S3 bucket</h2><h3 id="Configure-the-Bucket-Properties"><a href="#Configure-the-Bucket-Properties" class="headerlink" title="Configure the Bucket Properties"></a>Configure the Bucket Properties</h3><p>Once your bucket is created, go to the <strong>Properties</strong> tab and scroll down to the bottom of the page to find <strong>Static website hosting</strong> section.</p>
<p>Enable the static web hosting to host a static website. Also, mention the <em>index.html</em> as the default Index document, as shown in the snapshots below.</p>
<p><img src="https://video.udacity-data.com/topher/2022/June/629f3ef5_screenshot-2022-06-07-at-5.31.24-pm/screenshot-2022-06-07-at-5.31.24-pm.jpeg" alt="Navigate to the **Properties &gt;&gt; Static website hosting** section to Enable it. "></p>
<p><img src="https://video.udacity-data.com/topher/2022/June/629f3f25_screenshot-2022-06-07-at-5.31.48-pm/screenshot-2022-06-07-at-5.31.48-pm.jpeg" alt="Enable the static web hosting to host a static website. "></p>
<h3 id="Configure-the-Bucket-Permissions"><a href="#Configure-the-Bucket-Permissions" class="headerlink" title="Configure the Bucket Permissions"></a>Configure the Bucket Permissions</h3><p>Go to the <strong>Permissions</strong> tab and add the following:</p>
<p>Add bucket policy allowing other AWS services to access the bucket contents. You can use the <a href="https://awspolicygen.s3.amazonaws.com/policygen.html" target="_blank" rel="noopener">policy generator</a> tool to generate such an IAM policy. Enter the following bucket policy replacing your-website [myBucketName] with the name of your bucket and click “Save”.</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"> <span class="attr">"Version"</span>: <span class="string">"2012-10-17"</span>,</span><br><span class="line"> <span class="attr">"Statement"</span>: [</span><br><span class="line">     &#123;</span><br><span class="line">         <span class="attr">"Sid"</span>: <span class="string">"PublicReadGetObject"</span>,</span><br><span class="line">         <span class="attr">"Effect"</span>: <span class="string">"Allow"</span>,</span><br><span class="line">         <span class="attr">"Principal"</span>: <span class="string">"*"</span>,</span><br><span class="line">         <span class="attr">"Action"</span>: [</span><br><span class="line">             <span class="string">"s3:GetObject"</span></span><br><span class="line">         ],</span><br><span class="line">         <span class="attr">"Resource"</span>: [</span><br><span class="line">             <span class="string">"arn:aws:s3:::[myBucketName]/*"</span></span><br><span class="line">         ]</span><br><span class="line">     &#125;</span><br><span class="line"> ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Upload-File-Folders-to-the-Bucket"><a href="#Upload-File-Folders-to-the-Bucket" class="headerlink" title="Upload File/Folders to the Bucket"></a>Upload File/Folders to the Bucket</h2><p>From the <a href="https://learn.udacity.com/nanodegrees/nd0067/parts/cd0295/lessons/6f2afba3-3053-4b84-b155-a2887806965f/concepts/console.aws.amazon.com/s3/home" target="_blank" rel="noopener">S3 dashboard</a>, click on the name of the bucket you have created in the step above.</p>
<p><img src="https://video.udacity-data.com/topher/2020/November/5fbe3ad2_screenshot-2020-11-25-at-4.12.35-pm/screenshot-2020-11-25-at-4.12.35-pm.png" alt="Details of an existing bucket. Upload files/folders to this bucket."></p>
<p>Click on the <strong>Upload</strong> button to upload files and folders into the current bucket.</p>
<p><img src="https://video.udacity-data.com/topher/2020/November/5fbe3e6d_screenshot-2020-11-25-at-4.52.03-pm/screenshot-2020-11-25-at-4.52.03-pm.png" alt="A sample file in the bucket"></p>
<p>Click on the file name to view the file-specific details, as shown below.</p>
<p><img src="https://video.udacity-data.com/topher/2020/November/5fbe3ec1_screenshot-2020-11-25-at-4.53.35-pm/screenshot-2020-11-25-at-4.53.35-pm.png" alt="Details of an individual file (object)"></p>

          
        
      
    </div>
    
    
    
	
	

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.qianhongbo.com/Fullstack/AWS/AWS-Elastic-Beanstalk.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Qian Hongbo">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/Me.JPG">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Blog | Qian Homeberg">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/Fullstack/AWS/AWS-Elastic-Beanstalk.html" itemprop="url">AWS Elastic Beanstalk</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-07-05T14:45:26+08:00">
                2022-07-05
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Fullstack/" itemprop="url" rel="index">
                    <span itemprop="name">Fullstack</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

		  
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/Fullstack/AWS/AWS-Elastic-Beanstalk.html#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="Fullstack/AWS/AWS-Elastic-Beanstalk.html" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  618 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  3 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Elastic-Beanstalk-Overview"><a href="#Elastic-Beanstalk-Overview" class="headerlink" title="Elastic Beanstalk Overview"></a>Elastic Beanstalk Overview</h2><p>AWS Elastic Beanstalk is a service (platform as a service) that allows you to run your web application on the AWS cloud without worrying about scaling or configuring the underlying virtual machines (web servers).</p>
<p>AWS Elastic Beanstalk supports Java, .NET, PHP, Node.js, Python, Ruby, and Go platforms. You just need to upload an application zip file to the AWS Elastic Beanstalk and configure some settings to make the app run. We can either upload the zip file using the AWS UI (web console) or use the explicit commands in the local terminal.</p>
<p>After uploading the application zip file, Elastic Beanstalk will handle deploying the application to the (right-sized) EC2 VMs, load balancing, auto-scaling, and application health monitoring.</p>
<p>Elastic Beanstalk offers the following advantages:</p>
<ul>
<li><strong>Free</strong>: You only pay for the servers that elastic beanstalk uses. The extra tools are free of charge.</li>
<li><strong>Pre-built Environments</strong>: Most major programming languages are supported out of the box.</li>
<li><strong>Simple Server Management</strong>: Security updates and system upgrades are done for you.</li>
<li><strong>Easy Scaling</strong>: If you need to provision extra servers, you can quickly change your configuration.</li>
</ul>
<h2 id="What-does-Elastic-Beanstalk-use"><a href="#What-does-Elastic-Beanstalk-use" class="headerlink" title="What does Elastic Beanstalk use?"></a>What does Elastic Beanstalk use?</h2><ul>
<li><strong>Elastic Compute Cloud (EC2)</strong>: Used for hosting servers.</li>
<li><strong>Simple Storage Service (S3)</strong>: Used for storing application code and sending it to other servers.</li>
<li><strong>Simple Notification Service (SNS)</strong>: Provides a way to notify you of events inside the environment.</li>
</ul>
<h2 id="Deployment-process"><a href="#Deployment-process" class="headerlink" title="Deployment process"></a>Deployment process</h2><h3 id="Step-1-Prepare-the-Application-Code"><a href="#Step-1-Prepare-the-Application-Code" class="headerlink" title="Step 1. Prepare the Application Code"></a>Step 1. Prepare the Application Code</h3><p>Fork and clone the <a href="https://github.com/udacity/cd0295-reactnd-contacts-server" target="_blank" rel="noopener">Github repository</a> and follow the steps mentioned in the README.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/udacity/cd0295-reactnd-contacts-server.git</span><br><span class="line"><span class="built_in">cd</span> cd0295-reactnd-contacts-server</span><br><span class="line"></span><br><span class="line"><span class="comment"># Create the files for Archive.zip</span></span><br><span class="line">npm run build</span><br><span class="line"><span class="comment"># Create an Archive.zip in the exercise root directory</span></span><br><span class="line">npm run zip</span><br></pre></td></tr></table></figure>

<h3 id="Step-2-Create-Elastic-Beanstalk-Node-js-Environment"><a href="#Step-2-Create-Elastic-Beanstalk-Node-js-Environment" class="headerlink" title="Step 2. Create Elastic Beanstalk Node.js Environment"></a>Step 2. Create Elastic Beanstalk Node.js Environment</h3><p>There are two ways to create an Elastic Beanstalk environment - using the EB CLI or AWS console. Let’s use the AWS console to create a Node.js environment. Navigate to the Elastic Beanstalk service in the AWS console, and start creating an environment. Use the following values during the configuration:</p>
<table>
<thead>
<tr>
<th align="left">Field</th>
<th align="left">Value</th>
</tr>
</thead>
<tbody><tr>
<td align="left">Environment tier</td>
<td align="left">Web server environment</td>
</tr>
<tr>
<td align="left"><strong>Application information</strong>  Application name</td>
<td align="left"><em>demo-app</em></td>
</tr>
<tr>
<td align="left"><strong>Environment information</strong>  Environment name</td>
<td align="left">Default</td>
</tr>
<tr>
<td align="left"><strong>Managed platform</strong>  Platform Platform branch</td>
<td align="left">Node.js Node.js 14 running on 64bit Amazon Linux 2 (Node.js 12 is deprecated now)</td>
</tr>
<tr>
<td align="left"><strong>Application code</strong></td>
<td align="left">Upload your application code (<strong>Archive.zip</strong> file)</td>
</tr>
</tbody></table>
<p>Leave the remaining fields as default, and finish creating the environment. It will take upto 15 mins to create the following resources as part of the environment:</p>
<ol>
<li>An EC2 instance to host your application, and a load balancer</li>
<li>A security group (firewall rules) for the EC2 instance</li>
<li>An S3 bucket to store the application artifacts</li>
<li>A CloudWatch alarm for logging and monitoring</li>
<li>A domain name</li>
</ol>
<p>Once you application is deployed to the Elastic Beanstalk, it will automatically run these comamnds on your behalf:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install --production</span><br><span class="line">npm start</span><br></pre></td></tr></table></figure>

<h2 id="Step-3-Save-the-Environment-Variable"><a href="#Step-3-Save-the-Environment-Variable" class="headerlink" title="Step 3. Save the Environment Variable"></a>Step 3. Save the Environment Variable</h2><p>Specify an environment variable in the <strong>Elastic Beanstalk environment &gt;&gt; Configuration &gt;&gt; Software settings &gt;&gt; Environment Properties</strong> section. Save a value against the <code>FIRST_NAME</code> variable, as shown in the snapshot below.</p>
<p><img src="https://video.udacity-data.com/topher/2022/June/629f2183_screenshot-2022-06-07-at-3.28.49-pm/screenshot-2022-06-07-at-3.28.49-pm.jpeg" alt="Set the environment variable for your application"></p>
<h2 id="Step-4"><a href="#Step-4" class="headerlink" title="Step 4."></a>Step 4.</h2><p>Once the environment is deployed and the environment variable created, navigate to the deployed URL and ensure that the server responds.</p>
<h3 id="Known-Issue"><a href="#Known-Issue" class="headerlink" title="Known Issue"></a>Known Issue</h3><p>Chorme has a security feature that does not allow the cross-platform request to pass. As a result, it generates:</p>
<blockquote>
<p>Access to fetch at ‘<a href="http://localhost:4000/contacts&#39;" target="_blank" rel="noopener">http://localhost:4000/contacts&#39;</a> from origin ‘<a href="http://demoapp-env.eba-2ph6pbkm.us-east-1.elasticbeanstalk.com'/" target="_blank" rel="noopener">http://demoapp-env.eba-2ph6pbkm.us-east-1.elasticbeanstalk.com’</a> has been blocked by CORS policy: The request client is not a secure context and the resource is in more-private address space <code>local</code>.</p>
</blockquote>
<p>The workaround if to use an alternative browser, such as Safari or Firefox.</p>

          
        
      
    </div>
    
    
    
	
	

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.qianhongbo.com/Fullstack/AWS/AWS-RDS.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Qian Hongbo">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/Me.JPG">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Blog | Qian Homeberg">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/Fullstack/AWS/AWS-RDS.html" itemprop="url">AWS RDS</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-07-05T14:21:14+08:00">
                2022-07-05
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Fullstack/" itemprop="url" rel="index">
                    <span itemprop="name">Fullstack</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

		  
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/Fullstack/AWS/AWS-RDS.html#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="Fullstack/AWS/AWS-RDS.html" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  338 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  2 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="What-is-RDS"><a href="#What-is-RDS" class="headerlink" title="What is RDS"></a>What is <code>RDS</code></h2><p><strong>RDS</strong>: AWS Relational Database Service, which is a service that aids in the administration and management of databases. RDS assists with database administrative tasks that include upgrades, patching, installs, backups, monitoring, performance checks, security, etc.</p>
<h3 id="Database-Engine-Support"><a href="#Database-Engine-Support" class="headerlink" title="Database Engine Support"></a>Database Engine Support</h3><ul>
<li>Oracle</li>
<li>PostgreSQL</li>
<li>MySQL</li>
<li>MariaDB</li>
<li>SQL Server</li>
</ul>
<h2 id="Configure-a-database"><a href="#Configure-a-database" class="headerlink" title="Configure a database"></a>Configure a database</h2><h3 id="What-do-we-need-to-configure"><a href="#What-do-we-need-to-configure" class="headerlink" title="What do we need to configure"></a>What do we need to configure</h3><ul>
<li><strong>Backups</strong>: A copy of your database can be made on a regular interval to avoid losing data if something goes wrong.</li>
<li><strong>Public or private</strong>: A database could be made available on the open web, or only within a private Internet network.</li>
<li><strong>Multiple Availability Zones:</strong> You can configure a database to be physically in multiple data-centers.</li>
<li><strong>Server specs:</strong> You can choose the size of the server.</li>
</ul>
<h3 id="Steps"><a href="#Steps" class="headerlink" title="Steps"></a>Steps</h3><ol>
<li>Navigate to the <a href="https://console.aws.amazon.com/rds/home" target="_blank" rel="noopener">RDS dashboard</a> and create a PostgreSQL database with the following configuration, and leave the remaining fields as default.</li>
</ol>
<table>
<thead>
<tr>
<th align="left"><strong>Field</strong></th>
<th align="left"><strong>Value</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left">Database creation method</td>
<td align="left"><strong>Standard create</strong>. Easy create option creates a private database by default.</td>
</tr>
<tr>
<td align="left">Engine option</td>
<td align="left">PostgreSQL 12 or 13, any release candidate</td>
</tr>
<tr>
<td align="left">Templates</td>
<td align="left">Free tier</td>
</tr>
<tr>
<td align="left"><strong>Settings</strong> DB instance identifier, master username, and password</td>
<td align="left">Your choice</td>
</tr>
<tr>
<td align="left"><strong>Instance configuration</strong> DB instance class</td>
<td align="left">Burstable classes with minimal size like db.t3.micro or db.t2.micro</td>
</tr>
<tr>
<td align="left"><strong>Storage</strong></td>
<td align="left">Default</td>
</tr>
<tr>
<td align="left"><strong>Connectivity</strong> VPC and subnet Public access VPC security group Availability Zone Database port</td>
<td align="left">Default YES Default No preferencce <code>5432</code></td>
</tr>
<tr>
<td align="left"><strong>Additional configuration</strong> Initial database name</td>
<td align="left"><code>postgres</code></td>
</tr>
</tbody></table>
<h3 id="Some-more-steps"><a href="#Some-more-steps" class="headerlink" title="Some more steps"></a>Some more steps</h3><ul>
<li>Once the database is created successfully, copy and save the database endpoint, master username, and password. It will help your application discover the database.</li>
<li><strong>Allow access to the database</strong>: Edit the security group’s inbound rule to allow incoming connections from anywhere (<code>0.0.0.0/0</code>). It will allow your local application to connect to the database.</li>
</ul>
<p><img src="https://video.udacity-data.com/topher/2022/June/629dfaac_screenshot-2022-06-06-at-6.01.39-pm/screenshot-2022-06-06-at-6.01.39-pm.jpeg" alt></p>
<p><img src="https://video.udacity-data.com/topher/2022/June/629dfa8f_screenshot-2022-06-06-at-6.02.14-pm/screenshot-2022-06-06-at-6.02.14-pm.jpeg" alt></p>
<h2 id="Test-the-connection-using-the-PostgreSQL-client"><a href="#Test-the-connection-using-the-PostgreSQL-client" class="headerlink" title="Test the connection using the PostgreSQL client."></a>Test the connection using the PostgreSQL client.</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Assuming the endpoint is: database-1.csxbuclmtj3c.us-east-1.rds.amazonaws.com</span></span><br><span class="line">psql -h database-1.csxbuclmtj3c.us-east-1.rds.amazonaws.com -U postgres postgres</span><br><span class="line"><span class="comment"># It will open the "postgres=&gt;" prompt if the connection is successful.</span></span><br><span class="line"><span class="comment"># Provide the database password when prompted.</span></span><br></pre></td></tr></table></figure>


          
        
      
    </div>
    
    
    
	
	

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/14/">14</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/Me.JPG" alt="Qian Hongbo">
            
              <p class="site-author-name" itemprop="name">Qian Hongbo</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">66</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">12</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">24</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/Qianhongbo" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i></a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="/images/wechat.jpg" target="_blank" title="Wechat">
                      
                        <i class="fa fa-fw fa-weixin"></i></a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="/images/QQ.jpg" target="_blank" title="QQ">
                      
                        <i class="fa fa-fw fa-qq"></i></a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://www.zhihu.com/people/Qianhongbo" target="_blank" title="Zhihu">
                      
                        <i class="fa fa-fw fa-heart"></i></a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://music.163.com/#/user/home?id=411692137" target="_blank" title="music163">
                      
                        <i class="fa fa-fw fa-music"></i></a>
                  </span>
                
            </div>
          

          
          

          
          
	<br>

  <iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="330" height="86" src="//music.163.com/outchain/player?type=2&id=1826996483&auto=0&height=66"></iframe>
          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2019 &mdash; <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Qian Hongbo</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">Site words total count&#58;</span>
    
    <span title="Site words total count">65.6k</span>
  
</div>





<div>
<span id="timeDate">载入天数...</span><span id="times">载入时分秒...</span>
<script>
    var now = new Date();
    function createtime() {
        var grt= new Date("06/04/2019 12:27:43");
        now.setTime(now.getTime()+250);
        days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days);
        hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours);
        if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum);
        mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;}
        seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum);
        snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;}
        document.getElementById("timeDate").innerHTML = "本站已安全运行 "+dnum+" 天 ";
        document.getElementById("times").innerHTML = hnum + " 小时 " + mnum + " 分 " + snum + " 秒";
    }
setInterval("createtime()",250);
</script>
</div>





        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      人次
    </span>
  

  
    <span class="site-pv">
      <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      次
    </span>
  
</div>








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  

    
      <script id="dsq-count-scr" src="https://qianhongbo.disqus.com/count.js" async></script>
    

    

  




	





  














  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "./public/search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>


  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginModelPath":"assets/","model":{"jsonPath":"/live2dw/assets/wanko.model.json"},"display":{"position":"right","width":166,"height":200},"mobile":{"show":false},"log":false,"pluginJsPath":"lib/","pluginRootPath":"live2dw/","tagMode":false});</script></body>



<!-- 代码块复制功能 -->
  <script type="text/javascript" src="/js/src/clipboard.min.js"></script>
  <script type="text/javascript" src="/js/src/clipboard-use.js"></script>

</html>
